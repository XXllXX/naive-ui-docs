import{j as ie,o as ae,d as de,e as U}from"./index-mgaNkJ7F.js";const ue={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ce=U("path",{d:"M80 152v256a40.12 40.12 0 0 0 40 40h272a40.12 40.12 0 0 0 40-40V152",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),le=U("rect",{x:"48",y:"64",width:"416",height:"80",rx:"28",ry:"28",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),fe=U("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M320 304l-64 64l-64-64"},null,-1),pe=U("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 345.89V224"},null,-1),Ee=[ce,le,fe,pe],ke=ie({name:"ArchiveOutline",render:function(r,c){return ae(),de("svg",ue,Ee)}});function he(t){if(!t)return{};const r={};return t.trim().split(/[\r\n]+/).forEach(function(a){const d=a.split(":"),y=(d[0]||"").trim().toLowerCase(),p=(d[1]||"").trim();r[y]=p}),r}const Oe=({url:t,method:r,headers:c,body:a,responseType:d,withCredentials:y,onDownloadProgress:p,onUploadProgress:v,onResponse:x,onNetworkError:T,onHeadersReceived:q})=>{const i=new XMLHttpRequest;i.open(r,t),i.withCredentials=y,i.responseType=d;for(const[s,R]of Object.entries(c))i.setRequestHeader(s,R);v&&i.upload.addEventListener("progress",s=>{v({lengthComputable:s.lengthComputable,percent:s.lengthComputable?s.loaded/s.total*100:0,loaded:s.loaded,total:s.total,detail:s,originalRequest:i})}),p&&i.addEventListener("progress",s=>{p({lengthComputable:s.lengthComputable,percent:s.lengthComputable?s.loaded/s.total*100:0,loaded:s.loaded,total:s.total,detail:s,originalRequest:i})});let k=null,S=()=>(k===null&&(k=he(i.getAllResponseHeaders())),k);i.addEventListener("loadend",s=>{x({status:i.status,headers:S(),body:i.response},s)});const w=()=>{i.readyState===i.HEADERS_RECEIVED&&q(S(),i),i.removeEventListener("readystatechange",w)};return i.addEventListener("readystatechange",w),i.addEventListener("error",s=>{T(s)}),i.send(a),{abort(){i.abort()}}};var E;(function(t){t.NETWORK="NETWORK",t.ABORTED="ABORTED",t.INVALID_JSON="INVALID_JSON",t.INVALID_CONVERSION="INVALID_CONVERSION",t.TIMEOUT="TIMEOUT",t.HTTP="HTTP",t.BAD_REQUEST="BAD_REQUEST",t.BROKEN_ON_AFTER_RESPONSE="BROKEN_ON_AFTER_RESPONSE",t.BROKEN_ON_BEFORE_REQUEST="BROKEN_ON_BEFORE_REQUEST",t.BROKEN_ON_INIT="BROKEN_ON_INIT",t.BROKEN_ON_RESPONSE_ERROR="BROKEN_ON_RESPONSE_ERROR",t.BROKEN_ON_NON_RESPONSE_ERROR="BROKEN_ON_NON_RESPONSE_ERROR",t.BROKEN_ON_HEADERS_RECEIVED="BROKEN_ON_HEADERS_RECEIVED"})(E||(E={}));function ye(){const t=new Error;return t.__lylaError=!0,t}function O(t,r){const c=ye();c.name=`LylaError[${t.type}]`,r&&(c.stack+=r),Object.assign(c,t);const a=()=>{const d=c;return{name:d.name,message:d.message,stack:d.stack,type:d.type,error:d.error,detail:d.detail,context:d.context,response:d.response,requestOptions:d.requestOptions,__lylaError:!0}};return c.spread=a,c}function Re(t){return typeof t=="object"&&!!t&&"__lylaError"in t}function _e(t,r){return Ne(r)?r:r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t}function Ne(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function oe(t){return t&&typeof t=="object"}function Q(t,r){if(!r)return t;for(const[c,a]of Object.entries(r))a===void 0?delete t[c]:t[c.toLowerCase()]=typeof a=="string"?a:`${a}`;return t}function $(...t){let r={};for(const c of t)if(Array.isArray(c))Array.isArray(r)||(r=[]),r.push(...c);else if(oe(c))for(let[a,d]of Object.entries(c))oe(d)&&a in r&&(d=$(r[a],d)),r[a]=d;return r}const me={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Upprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway TImeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"INsufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"};function ge(t){return me[t]||""}function ve(t){return 200<=t&&t<300}function be(t,r,...c){const a=$(r,...c);async function d(p){var v,x,T,q,i,k,S,w;const s=p.context===void 0?a.context:p.context;let R=Object.assign({},p,{context:typeof s=="object"?JSON.parse(JSON.stringify(s)):s});async function N(o){var n,u;if(!((n=e.hooks)===null||n===void 0)&&n.onNonResponseError)try{for(const l of(u=e.hooks)===null||u===void 0?void 0:u.onNonResponseError){const f=l(o);f instanceof Promise&&await f}}catch(l){m(O({type:E.BROKEN_ON_NON_RESPONSE_ERROR,error:l,message:"`onNonResponseError` hook throws error",detail:void 0,response:void 0,context:o.context,requestOptions:e},void 0));return}}try{if(!((v=a==null?void 0:a.hooks)===null||v===void 0)&&v.onInit)for(const o of a.hooks.onInit){const n=o(R);n instanceof Promise?R=await n:R=n}if(!((x=p==null?void 0:p.hooks)===null||x===void 0)&&x.onInit)for(const o of p.hooks.onInit){const n=o(R);n instanceof Promise?R=await n:R=n}}catch(o){const n=O({type:E.BROKEN_ON_INIT,message:"`onInit` hook throws error",detail:void 0,error:o,response:void 0,context:R.context,requestOptions:R},void 0);throw N(n),n}let e=$(a,R);e.method=(T=e.method)===null||T===void 0?void 0:T.toUpperCase(),e.responseType=p.responseType||"text",e.url=e.url||"",e.baseUrl&&(e.url=_e(e.baseUrl,e.url));let I;try{I=(q=new Error().stack)===null||q===void 0?void 0:q.replace(/^Error/,"")}catch{}if(e.query){const o={};for(const l in e.query){const f=e.query[l];f!=null&&(o[l]=f.toString())}const u=new URLSearchParams(o).toString();if(e.url.includes("?")){const l=O({type:E.BAD_REQUEST,message:"`options.query` can't be set if `options.url` contains '?'",detail:void 0,error:void 0,response:void 0,context:e.context,requestOptions:e},void 0);throw N(l),l}u.length&&(e.url=e.url+"?"+u)}if(!((i=e.hooks)===null||i===void 0)&&i.onBeforeRequest)try{for(const o of(k=e.hooks)===null||k===void 0?void 0:k.onBeforeRequest){const n=o(e);n instanceof Promise?e=await n:e=n}}catch(o){const n=O({type:E.BROKEN_ON_BEFORE_REQUEST,message:"`onBeforeRequest` hook throws error",detail:void 0,error:o,response:void 0,context:R.context,requestOptions:e},void 0);throw N(n),n}if(e.json!==void 0){if(e.body!==void 0){const o=O({type:E.BAD_REQUEST,message:"`options.json` can't be used together with `options.body`. If you want to use `options.json`, you should left `options.body` as `undefined`",detail:void 0,error:void 0,response:void 0,context:e.context,requestOptions:e},void 0);throw N(o),o}e.body=JSON.stringify(e.json)}const{timeout:B,url:ne="",method:G="get",body:W,responseType:K="text",withCredentials:re=!1,signal:C,onUploadProgress:M,onDownloadProgress:V}=e;async function j(o){var n,u;if(!((n=e.hooks)===null||n===void 0)&&n.onResponseError)try{for(const l of(u=e.hooks)===null||u===void 0?void 0:u.onResponseError){const f=l(o,A);f instanceof Promise&&await f}}catch(l){const f=O({type:E.BROKEN_ON_RESPONSE_ERROR,error:l,message:"`onResponseError` hook throws error",detail:void 0,response:void 0,context:o.context,requestOptions:e},void 0);N(f),m(f);return}}let z,m,A;const b={};Q(b,a.headers),Q(b,e.headers),e.json!==void 0&&(b["content-type"]=(S=b["content-type"])!==null&&S!==void 0?S:"application/json"),b.accept=(w=b.accept)!==null&&w!==void 0?w:"*/*",e.headers=b;let D=!1,X=!1;function Z(){D=!0,X||F()}function F(){X=!0,C&&C.removeEventListener("abort",Y)}const se=new Promise((o,n)=>{z=o,m=u=>{D||(Z(),n(u))},A=u=>{D||(Z(),n(u))}});let P=!1;function Y(){if(P)return;P=!0;const o=O({type:E.ABORTED,message:"Request aborted",detail:void 0,error:void 0,response:void 0,context:e.context,requestOptions:e},I);j(o),m(o),ee.abort()}C&&C.addEventListener("abort",Y);let L=!1;const ee=t({url:ne,method:G,body:W,json:e.json,headers:b,responseType:K,withCredentials:re,extraOptions:e.extraOptions,onNetworkError(o){L=!0,F();const n=O({type:E.NETWORK,message:"Network error",detail:o,error:void 0,response:void 0,context:e.context,requestOptions:e},I);j(n),m(n)},onDownloadProgress:o=>{V==null||V(Object.assign(Object.assign({},o),{requestOptions:e}))},onUploadProgress:o=>{M==null||M(Object.assign(Object.assign({},o),{requestOptions:e}))},onHeadersReceived:(o,n)=>{var u;if(!P&&!L&&!((u=e.hooks)===null||u===void 0)&&u.onHeadersReceived)try{for(const l of e.hooks.onHeadersReceived)l({headers:o,requestOptions:e,originalRequest:n},A)}catch(l){const f=O({type:E.BROKEN_ON_HEADERS_RECEIVED,message:"`onHeadersReceived` hook throws error",detail:void 0,response:void 0,error:l,context:e.context,requestOptions:e},void 0);N(f),m(f);return}},async onResponse(o,n){var u;if(P||L)return;F();let l,f=!1,J,H;const te=ge(o.status);let _={context:e.context,requestOptions:e,status:o.status,statusText:te,headers:Q({},o.headers),body:o.body,detail:n,set json(h){f=!0,l=h},get json(){if(f)return l;if(K!=="text"){const h=O({type:E.INVALID_CONVERSION,message:`Can not convert ${K} to JSON`,detail:void 0,error:void 0,response:_,context:_.context,requestOptions:e},void 0);throw N(h),h}if(J===void 0)try{return J=JSON.parse(o.body)}catch(h){H=h}else return J;if(H){const h=O({type:E.INVALID_JSON,message:H.message,detail:void 0,error:H,context:_.context,response:_,requestOptions:e},void 0);throw N(h),h}}};if(!ve(o.status)){const h=`${o.status} ${te}`,g=O({type:E.HTTP,message:`Request failed with ${h}`,detail:void 0,error:void 0,response:_,context:e.context,requestOptions:e},I);j(g),m(g);return}if(!((u=e.hooks)===null||u===void 0)&&u.onAfterResponse)try{for(const h of e.hooks.onAfterResponse){const g=h(_,A);g instanceof Promise?_=await g:_=g}}catch(h){const g=O({type:E.BROKEN_ON_AFTER_RESPONSE,message:"`onAfterResponse` hook throws error",detail:void 0,response:_,error:h,context:_.context,requestOptions:e},void 0);N(g),m(g);return}z(_)}});if(B&&setTimeout(()=>{if(D)return;ee.abort(),P=!0;const o=O({type:E.TIMEOUT,message:B?`Timeout of ${B}ms exceeded`:"Timeout exceeded",detail:void 0,error:void 0,response:void 0,context:e.context,requestOptions:e},I);j(o),m(o)},B),!e.allowGetBody&&G==="GET"&&W){const o=O({type:E.BAD_REQUEST,message:"Can not send a request with body in 'GET' method.",error:void 0,response:void 0,detail:void 0,context:e.context,requestOptions:e},void 0);throw N(o),o}return se}function y(p){return(v,x)=>d(Object.assign(Object.assign({},x),{method:p,url:v}))}return{lyla:Object.assign(d,{get:y("get"),post:y("post"),put:y("put"),patch:y("patch"),head:y("head"),delete:y("delete"),options:y("options"),trace:y("trace"),connect:y("connect"),get errorType(){return{}}}),isLylaError(p){return Re(p)}}}const{lyla:Se,isLylaError:we}=be(Oe,{context:void 0});export{ke as A,Se as l};
